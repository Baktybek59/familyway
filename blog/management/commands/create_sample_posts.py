from django.core.management.base import BaseCommand
from blog.models import BlogPost


class Command(BaseCommand):
    help = 'Создает примеры статей для блога'

    def handle(self, *args, **options):
        posts_data = [
            {
                'title': 'Первые дни с новорожденным: что нужно знать',
                'content': '''
                <h2>Добро пожаловать в мир родительства!</h2>
                
                <p>Первые дни с новорожденным могут быть одновременно радостными и тревожными. Вот несколько важных моментов, которые помогут вам чувствовать себя более уверенно:</p>
                
                <h3>1. Кормление</h3>
                <p>Новорожденные обычно едят каждые 2-3 часа. Следите за признаками голода: сосание пальцев, поворот головы в сторону прикосновения к щеке, плач.</p>
                
                <h3>2. Сон</h3>
                <p>Младенцы спят много, но короткими периодами. Не беспокойтесь, если ваш ребенок не спит всю ночь - это нормально для новорожденных.</p>
                
                <h3>3. Смена подгузников</h3>
                <p>Меняйте подгузники каждые 2-3 часа или сразу после кормления. Это поможет избежать опрелостей.</p>
                
                <h3>4. Безопасность</h3>
                <p>Всегда укладывайте ребенка спать на спину, уберите из кроватки мягкие игрушки и подушки.</p>
                
                <p>Помните: каждый ребенок уникален, и то, что работает для одного, может не работать для другого. Доверяйте своим инстинктам!</p>
                ''',
                'category': 'general',
                'language': 'ru'
            },
            {
                'title': 'Как папа может помочь маме после родов',
                'content': '''
                <h2>Роль отца в первые дни после родов</h2>
                
                <p>Отцы играют важнейшую роль в поддержке мамы и уходе за новорожденным. Вот как вы можете помочь:</p>
                
                <h3>1. Поддержка мамы</h3>
                <p>Мама будет уставать и эмоционально истощаться. Ваша поддержка и понимание очень важны. Помогайте с домашними делами, давайте маме время на отдых.</p>
                
                <h3>2. Уход за ребенком</h3>
                <p>Учитесь менять подгузники, купать ребенка, укладывать спать. Чем больше вы практикуетесь, тем увереннее станете.</p>
                
                <h3>3. Эмоциональная поддержка</h3>
                <p>Слушайте маму, когда она хочет поговорить о своих чувствах. Послеродовая депрессия - реальная проблема, и ваша поддержка может быть решающей.</p>
                
                <h3>4. Время для двоих</h3>
                <p>Находите время для общения с ребенком один на один. Это поможет укрепить вашу связь.</p>
                
                <p>Помните: быть хорошим отцом - это процесс обучения. Не бойтесь делать ошибки!</p>
                ''',
                'category': 'dad',
                'language': 'ru'
            },
            {
                'title': 'Грудное вскармливание: советы для мам',
                'content': '''
                <h2>Основы грудного вскармливания</h2>
                
                <p>Грудное вскармливание - это естественный процесс, но он может потребовать времени и практики. Вот несколько советов:</p>
                
                <h3>1. Правильное прикладывание</h3>
                <p>Убедитесь, что ребенок правильно захватывает грудь. Рот должен быть широко открыт, а губы вывернуты наружу.</p>
                
                <h3>2. Частота кормлений</h3>
                <p>Кормите по требованию, а не по расписанию. В первые недели это может быть 8-12 раз в день.</p>
                
                <h3>3. Поза для кормления</h3>
                <p>Найдите удобную позу. Попробуйте разные варианты: колыбель, футбольный мяч, лежа на боку.</p>
                
                <h3>4. Уход за грудью</h3>
                <p>После каждого кормления наносите на соски специальный крем или ланолин. Это поможет предотвратить трещины.</p>
                
                <h3>5. Питание мамы</h3>
                <p>Ешьте здоровую пищу и пейте много воды. Ваше питание влияет на качество молока.</p>
                
                <p>Если у вас возникают проблемы, не стесняйтесь обращаться к консультанту по грудному вскармливанию.</p>
                ''',
                'category': 'mom',
                'language': 'ru'
            },
            {
                'title': 'Развитие ребенка в первый месяц',
                'content': '''
                <h2>Что умеет ваш ребенок в первый месяц</h2>
                
                <p>Первый месяц жизни - это время удивительных изменений. Вот что происходит с вашим малышом:</p>
                
                <h3>Физическое развитие</h3>
                <ul>
                    <li>Поднимает голову на несколько секунд</li>
                    <li>Следит глазами за движущимися объектами</li>
                    <li>Реагирует на громкие звуки</li>
                    <li>Улыбается (рефлекторно)</li>
                </ul>
                
                <h3>Сон</h3>
                <p>Новорожденные спят 16-17 часов в день, но короткими периодами. Это нормально!</p>
                
                <h3>Кормление</h3>
                <p>Ребенок ест каждые 2-3 часа. Следите за признаками сытости: расслабленные руки, спокойное выражение лица.</p>
                
                <h3>Общение</h3>
                <p>Малыш общается через плач. Со временем вы научитесь различать разные типы плача.</p>
                
                <p>Помните: каждый ребенок развивается в своем темпе. Не сравнивайте с другими детьми!</p>
                ''',
                'category': 'general',
                'language': 'ru'
            }
        ]

        # Получаем или создаем пользователя-автора
        from django.contrib.auth.models import User
        author, created = User.objects.get_or_create(
            username='writer',
            defaults={'email': 'writer@example.com'}
        )
        
        created_count = 0
        for post_data in posts_data:
            post, created = BlogPost.objects.get_or_create(
                title=post_data['title'],
                defaults={
                    'author': author,
                    'content': post_data['content'],
                    'category': post_data['category'],
                    'language': post_data['language'],
                    'is_published': True
                }
            )
            if created:
                created_count += 1
                self.stdout.write(
                    self.style.SUCCESS(f'Создана статья: {post.title}')
                )
            else:
                self.stdout.write(
                    self.style.WARNING(f'Статья уже существует: {post.title}')
                )

        self.stdout.write(
            self.style.SUCCESS(f'Успешно создано {created_count} новых статей')
        )

