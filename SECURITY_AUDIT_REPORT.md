# üîí –û—Ç—á–µ—Ç –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ FamilyWay +

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 14 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è Django:** 5.2.5  
**–°—Ç–∞—Ç—É—Å:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò –û–ë–ù–ê–†–£–ñ–ï–ù–´

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –£–Ø–ó–í–ò–ú–û–°–¢–ò

### 1. **–°–ª–∞–±–∞—è –∑–∞—â–∏—Ç–∞ SECRET_KEY** - –ö–†–ò–¢–ò–ß–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `settings.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π SECRET_KEY
- **–ö–æ–¥:** `SECRET_KEY = config('SECRET_KEY', default='django-insecure-your-secret-key-here-change-in-production')`
- **–†–∏—Å–∫:** –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —Å–µ—Å—Å–∏–π, CSRF —Ç–æ–∫–µ–Ω–æ–≤, –ø–æ–¥–ø–∏—Å—å cookies
- **–†–µ—à–µ–Ω–∏–µ:** ‚ö†Ô∏è –ù–ï–ú–ï–î–õ–ï–ù–ù–û –∏–∑–º–µ–Ω–∏—Ç—å SECRET_KEY –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### 2. **–ü–∞—Ä–æ–ª—å –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ –∫–æ–¥–µ** - –ö–†–ò–¢–ò–ß–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `settings_production.py` –ø–∞—Ä–æ–ª—å –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- **–ö–æ–¥:** `'PASSWORD': 'J@nym9494!'`
- **–†–∏—Å–∫:** –ü–æ–ª–Ω–∞—è –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ:** ‚ö†Ô∏è –ù–ï–ú–ï–î–õ–ï–ù–ù–û –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. **DEBUG=True –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** - –ö–†–ò–¢–ò–ß–ù–û
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í `settings.py` DEBUG –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω
- **–ö–æ–¥:** `DEBUG = config('DEBUG', default=True, cast=bool)`
- **–†–∏—Å–∫:** –£—Ç–µ—á–∫–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø—É—Ç–µ–π –∫ —Ñ–∞–π–ª–∞–º
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å DEBUG=False –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

## ‚ö†Ô∏è –í–´–°–û–ö–ò–ï –†–ò–°–ö–ò

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTPS –Ω–∞—Å—Ç—Ä–æ–µ–∫** - –í–´–°–û–ö–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- **–ö–æ–¥:** 
  ```python
  # SECURE_SSL_REDIRECT = True
  # SESSION_COOKIE_SECURE = True
  # CSRF_COOKIE_SECURE = True
  ```
- **–†–∏—Å–∫:** –ü–µ—Ä–µ—Ö–≤–∞—Ç —Ç—Ä–∞—Ñ–∏–∫–∞, MITM –∞—Ç–∞–∫–∏
- **–†–µ—à–µ–Ω–∏–µ:** –í–∫–ª—é—á–∏—Ç—å HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### 5. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** - –í–´–°–û–ö–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ —Ç–æ–ª—å–∫–æ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é
- **–ö–æ–¥:** `file_extension = file.name.lower().split('.')[-1]`
- **–†–∏—Å–∫:** –ó–∞–≥—Ä—É–∑–∫–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤, RCE
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É MIME-—Ç–∏–ø–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ

### 6. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting** - –í–´–°–û–ö–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞ –∏ DDoS
- **–†–∏—Å–∫:** –ê—Ç–∞–∫–∏ –Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å django-ratelimit

---

## üî∂ –°–†–ï–î–ù–ò–ï –†–ò–°–ö–ò

### 7. **–°–ª–∞–±–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è CORS** - –°–†–ï–î–ù–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ CORS
- **–†–∏—Å–∫:** CSRF –∞—Ç–∞–∫–∏ —Å –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- **–†–µ—à–µ–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å django-cors-headers

### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** - –°–†–ï–î–ù–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ø—ã—Ç–æ–∫ –≤–∑–ª–æ–º–∞
- **–†–∏—Å–∫:** –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∞—Ç–∞–∫
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å security logging

### 9. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–π** - –°–†–ï–î–ù–ò–ô
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–ª–≥–∏–π —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–π (2 –Ω–µ–¥–µ–ª–∏)
- **–ö–æ–¥:** `SESSION_COOKIE_AGE = 1209600  # 2 weeks`
- **–†–∏—Å–∫:** –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è –ø—Ä–∏ –∫—Ä–∞–∂–µ —Å–µ—Å—Å–∏–∏
- **–†–µ—à–µ–Ω–∏–µ:** –£–º–µ–Ω—å—à–∏—Ç—å –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å–µ—Å—Å–∏–π

---

## ‚úÖ –ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´

### 1. **–•–æ—Ä–æ—à–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF**
- ‚úÖ CSRF middleware –≤–∫–ª—é—á–µ–Ω
- ‚úÖ CSRF —Ç–æ–∫–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ö

### 2. **–ó–∞—â–∏—Ç–∞ –æ—Ç XSS**
- ‚úÖ X-Frame-Options: DENY
- ‚úÖ SECURE_BROWSER_XSS_FILTER = True
- ‚úÖ SECURE_CONTENT_TYPE_NOSNIFF = True

### 3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª–µ–π**
- ‚úÖ Django –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã –ø–∞—Ä–æ–ª–µ–π –≤–∫–ª—é—á–µ–Ω—ã
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª–µ–π

### 4. **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞**
- ‚úÖ @login_required –Ω–∞ –≤—Å–µ—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
- ‚úÖ Middleware –¥–ª—è –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 5. **ORM –∑–∞—â–∏—Ç–∞**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Django ORM (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

---

## üõ†Ô∏è –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –£–°–¢–†–ê–ù–ï–ù–ò–Æ

### –ù–ï–ú–ï–î–õ–ï–ù–ù–û (–ö—Ä–∏—Ç–∏—á–Ω–æ):

1. **–ò–∑–º–µ–Ω–∏—Ç—å SECRET_KEY:**
   ```python
   SECRET_KEY = os.environ.get('SECRET_KEY')
   if not SECRET_KEY:
       raise ValueError("SECRET_KEY environment variable is required")
   ```

2. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª—å –ë–î:**
   ```python
   'PASSWORD': os.environ.get('DB_PASSWORD'),
   ```

3. **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å DEBUG:**
   ```python
   DEBUG = False  # –ù–∏–∫–æ–≥–¥–∞ –Ω–µ True –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
   ```

### –í –¢–ï–ß–ï–ù–ò–ï –ù–ï–î–ï–õ–ò (–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):

4. **–í–∫–ª—é—á–∏—Ç—å HTTPS:**
   ```python
   SECURE_SSL_REDIRECT = True
   SESSION_COOKIE_SECURE = True
   CSRF_COOKIE_SECURE = True
   SECURE_HSTS_SECONDS = 31536000
   SECURE_HSTS_INCLUDE_SUBDOMAINS = True
   ```

5. **–£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤:**
   ```python
   import magic
   
   def clean_attachments(self):
       file = self.cleaned_data.get('attachments')
       if file:
           # –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–∞
           file_mime = magic.from_buffer(file.read(1024), mime=True)
           allowed_mimes = ['image/jpeg', 'image/png', 'application/pdf']
           if file_mime not in allowed_mimes:
               raise forms.ValidationError('–ù–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–π —Ç–∏–ø —Ñ–∞–π–ª–∞')
   ```

6. **–î–æ–±–∞–≤–∏—Ç—å rate limiting:**
   ```python
   from django_ratelimit.decorators import ratelimit
   
   @ratelimit(key='ip', rate='5/m', method='POST')
   def login_view(request):
       # –ª–æ–≥–∏–∫–∞ –≤—Ö–æ–¥–∞
   ```

### –í –¢–ï–ß–ï–ù–ò–ï –ú–ï–°–Ø–¶–ê (–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):

7. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS:**
   ```python
   CORS_ALLOWED_ORIGINS = [
       "https://familyway.plus",
       "https://www.familyway.plus",
   ]
   ```

8. **–î–æ–±–∞–≤–∏—Ç—å security logging:**
   ```python
   LOGGING = {
       'loggers': {
           'django.security': {
               'handlers': ['security_file'],
               'level': 'WARNING',
               'propagate': False,
           },
       },
   }
   ```

9. **–£–ª—É—á—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–π:**
   ```python
   SESSION_COOKIE_AGE = 3600  # 1 —á–∞—Å
   SESSION_EXPIRE_AT_BROWSER_CLOSE = True
   SESSION_COOKIE_HTTPONLY = True
   SESSION_COOKIE_SAMESITE = 'Strict'
   ```

---

## üìä –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | 7/10 | ‚úÖ –•–æ—Ä–æ—à–æ |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | 8/10 | ‚úÖ –•–æ—Ä–æ—à–æ |
| –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö | 3/10 | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ |
| –°–µ—Ç–µ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 4/10 | ‚ùå –ü–ª–æ—Ö–æ |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | 6/10 | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | 5/10 | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| **–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê** | **5.5/10** | ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –£–õ–£–ß–®–ï–ù–ò–Ø** |

---

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ù–µ–¥–µ–ª—è 1:
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å SECRET_KEY
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [ ] –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å DEBUG
- [ ] –í–∫–ª—é—á–∏—Ç—å HTTPS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ù–µ–¥–µ–ª—è 2:
- [ ] –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é —Ñ–∞–π–ª–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS

### –ù–µ–¥–µ–ª—è 3-4:
- [ ] –î–æ–±–∞–≤–∏—Ç—å security logging
- [ ] –£–ª—É—á—à–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Å—Å–∏–π
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞—É–¥–∏—Ç

---

## üìû –ö–û–ù–¢–ê–ö–¢–´

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** [–£–∫–∞–∑–∞—Ç—å –∏–º—è]  
**–î–∞—Ç–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∞—É–¥–∏—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è

---

*–≠—Ç–æ—Ç –æ—Ç—á–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã. –ù–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–π—Ç–µ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è.*
